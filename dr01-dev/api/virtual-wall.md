# 虚拟墙相关功能

## 功能说明
用于虚拟墙编辑

## 简要描述
虚拟墙管理功能

## 接口版本
| 版本号 | 制定日期 | 修订日期 |
|:-------|:--------:|:--------:|
| 1.0.0  | 2022-10-11 | 2022-10-11 |

## 状态限制
- Idle
- RunningTask

## 接口列表
- [获取虚拟墙](#获取虚拟墙)
- [更新虚拟墙](#更新虚拟墙)

## 接口详情

### 获取虚拟墙

**简要描述:**
获取当前地图虚拟墙数据

**接口版本:**
| 版本号 | 制定日期 | 修订日期 |
|:-------|:--------:|:--------:|
| 1.0.0  | 2020-4-23 | 2020-4-23 |

**状态限制:**
- Idle
- RuningTask

**状态跳转至:** 无

**请求URL:** 
- `http://机器人IP:端口号/robot/navigate/get_virtual_obstacles`

**请求方式:**
- POST

**请求参数:** 无

**返回示例:**

正确时返回:
```json
{
  "errorCode": "",
  "msg": "successed",
  "data": {
    "obstacles": {
      "circles": [
        {
          "center": {
            "x": 109,
            "y": 76
          },
          "radius": 60.108235708594876
        }
      ],
      "lines": [
        {
          "start": {
            "x": 449,
            "y": 806
          },
          "end": {
            "x": 560,
            "y": 802
          }
        }
      ],
      "polygons": [
        [
          {
            "x": 476,
            "y": 672
          },
          {
            "x": 489,
            "y": 748
          },
          {
            "x": 522,
            "y": 719
          },
          {
            "x": 554,
            "y": 765
          },
          {
            "x": 569,
            "y": 676
          }
        ]
      ],
      "polylines": [
        [
          {
            "x": 476,
            "y": 672
          },
          {
            "x": 489,
            "y": 748
          },
          {
            "x": 522,
            "y": 719
          },
          {
            "x": 554,
            "y": 765
          },
          {
            "x": 569,
            "y": 676
          }
        ]
      ],
      "rectangles": [
        {
          "end": {
            "x": 613,
            "y": 362
          },
          "start": {
            "x": 529,
            "y": 281
          }
        }
      ]
    },
    "ramps": {
      "polygons": [
        {
          "area": [
            {
              "x": 476,
              "y": 672
            },
            {
              "x": 489,
              "y": 748
            },
            {
              "x": 522,
              "y": 719
            },
            {
              "x": 554,
              "y": 765
            },
            {
              "x": 569,
              "y": 676
            }
          ]
        }
      ]
    },
    "slowzones": {
      "polygons": [
        {
          "speed": 0.5,
          "area": [
            {
              "x": 476,
              "y": 672
            },
            {
              "x": 489,
              "y": 748
            },
            {
              "x": 522,
              "y": 719
            },
            {
              "x": 554,
              "y": 765
            },
            {
              "x": 569,
              "y": 676
            }
          ]
        }
      ]
    },
    "crossroads": {
      "polygons": [
        {
          "area": [
            {
              "x": 476,
              "y": 672
            },
            {
              "x": 489,
              "y": 748
            },
            {
              "x": 522,
              "y": 719
            },
            {
              "x": 554,
              "y": 765
            },
            {
              "x": 569,
              "y": 676
            }
          ]
        }
      ]
    }
  },
  "successed": true
}
```

错误时返回:
```json
{
  "errorCode": 100,
  "msg": "",
  "data": "",
  "successed": false
}
```

**备注:**
更多返回错误代码请看首页的错误代码描述

### 更新虚拟墙

**简要描述:**
增加更新当前地图虚拟墙

**接口版本:**
| 版本号 | 制定日期 | 修订日期 |
|:-------|:--------:|:--------:|
| 1.0.0  | 2020-4-23 | 2020-4-23 |

**状态限制:**
- Idle
- RuningTask

**状态跳转至:** 无

**请求URL:** 
- `http://机器人IP:端口号/robot/navigate/add_virtual_obstacles`

**请求方式:**
- POST

**请求参数:** 无

**请求发送json:**
```json
{
  "obstacles": {
    "circles": [
      {
        "center": {
          "x": 109,
          "y": 76
        },
        "radius": 60.108235708594876
      }
    ],
    "lines": [
      {
        "start": {
          "x": 449,
          "y": 806
        },
        "end": {
          "x": 560,
          "y": 802
        }
      }
    ],
    "polygons": [
      [
        {
          "x": 476,
          "y": 672
        },
        {
          "x": 489,
          "y": 748
        },
        {
          "x": 522,
          "y": 719
        },
        {
          "x": 554,
          "y": 765
        },
        {
          "x": 569,
          "y": 676
        }
      ]
    ],
    "polylines": [
      [
        {
          "x": 476,
          "y": 672
        },
        {
          "x": 489,
          "y": 748
        },
        {
          "x": 522,
          "y": 719
        },
        {
          "x": 554,
          "y": 765
        },
        {
          "x": 569,
          "y": 676
        }
      ]
    ],
    "rectangles": [
      {
        "end": {
          "x": 613,
          "y": 362
        },
        "start": {
          "x": 529,
          "y": 281
        }
      }
    ]
  },
  "ramps": {
    "polygons": [
      {
        "area": [
          {
            "x": 476,
            "y": 672
          },
          {
            "x": 489,
            "y": 748
          },
          {
            "x": 522,
            "y": 719
          },
          {
            "x": 554,
            "y": 765
          },
          {
            "x": 569,
            "y": 676
          }
        ]
      }
    ]
  },
  "slowzones": {
    "polygons": [
      {
        "speed": 0.5,
        "area": [
          {
            "x": 476,
            "y": 672
          },
          {
            "x": 489,
            "y": 748
          },
          {
            "x": 522,
            "y": 719
          },
          {
            "x": 554,
            "y": 765
          },
          {
            "x": 569,
            "y": 676
          }
        ]
      }
    ]
  },
  "crossroads": {
    "polygons": [
      {
        "area": [
          {
            "x": 476,
            "y": 672
          },
          {
            "x": 489,
            "y": 748
          },
          {
            "x": 522,
            "y": 719
          },
          {
            "x": 554,
            "y": 765
          },
          {
            "x": 569,
            "y": 676
          }
        ]
      }
    ]
  }
}
```

**说明:**
- obstacles: 为虚拟墙对象
  - circles: 为圆形虚拟墙，center为圆心坐标，radius为半径大小
  - lines: 直线虚拟墙，start为线起点，end为线终点
  - polygons: 多边形虚拟墙，一个对象中多个点构成闭合多边形区域
  - polylines: 折线虚拟墙
  - rectangles: 矩形区域，start为对角线起点，end为对角线终点
- ramps: 为坡道对象(只支持polygons)
- slowzones: 为减速区对象(只支持polygons)
- crossroads: 为十字路对象(只支持polygons)

**返回示例:**

正确时返回:
```json
{
  "errorCode": "",
  "msg": "",
  "data": {},
  "successed": true
}
```

错误时返回:
```json
{
  "errorCode": 100,
  "msg": "",
  "data": "",
  "successed": false
}
```

**备注:**
更多返回错误代码请看首页的错误代码描述 