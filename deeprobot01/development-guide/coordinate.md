# 关于弧度计算

## 坐标系说明
除标记为world字段的，均为右手坐标系。坐标系原点为图片左下角。角度为弧度制，逆时针方向为正。

## 弧度计算方法

### 关于边的弧度
原本: 弧度(radius) = 弧长(L) / 半径(R)

为了方便计算，我们将起点与终点间的弦长(L')作为弧长(L)近似计算，L' ≈ L

即: 弧度(radius) = 弦长(L') / 半径(R)

![弧度计算示意图](/images/deeprobot01/development-guide/radius-calculation.png)

我们这边为了方便计算需要乘10作为整数处理, 即：
弧度(radius) = (弦长(L') / 半径(R)) * 10

radius = (L' / R) * 10

如果弧度大于0：则圆心在AB直线左边，圆弧在AB直线右边
如果弧度小于0: 则圆心在AB直线右边，圆弧在AB直线左边

### 关于圆心与角度的计算

注意：关于起始角与结束角度使用的为弧度制，表示右手坐标系下的XY角度。根据不同绘图控件，需要根据radius的正负，将其调整为AB直线的左右位置。

- 如果弧度大于0：则圆心在AB直线左边，圆弧在AB直线右边
- 如果弧度小于0: 则圆心在AB直线右边，圆弧在AB直线左边

![圆心角度计算示意图](/images/deeprobot01/development-guide/center-angle-calculation.png)

## 测试数据

### 示例1

```
起点: 28 79
终点: 102 61
curvity: -0.1
length 76.15773105863909
R 761.5773105863908
c1 47.972972972972975
c2 -0.24324324324324326
A 1.0591672753834915
B -148.28341855368882
C -573360.0803506209
curvity * (x2 - x1) -7.4
center_x -114.77485919894366
center_y -669.0744211512127
start_angle,end_angle 1.3822078610924655 1.2821661474809256
```

### 示例2

```
起点: 40 67
终点: 87 144
curvity: -0.5
length 90.21086409075129
R 180.42172818150257
c1 236.3404255319149
c2 1.6382978723404256
A 3.6840199185151654
B -777.3282028066999
C 10486.562698053414
curvity * (x2 - x1) -23.5
center_x 212.60985882898555
center_y 14.4848913641257
start_angle,end_angle 2.8462489923075944 2.340888482023437
```

### 示例3

```
起点: 135 92
终点: 85 67
curvity: 1.4
length 55.90169943749474
R 39.92978531249624
c1 149.75
c2 0.5
A 1.25
B -198.75
C 7087.1747448979595
curvity * (x2 - x1) -70
center_x 122.75255076525508
center_y 53.99489846948984
start_angle,end_angle 1.2590464391849494 2.809841432406456
```

### 示例4

```
起点: 37 103
终点: 73 118
curvity: -1.6
length 39
R 24.375
c1 101.04166666666667
c2 0.4166666666666667
A 1.1736111111111112
B -259.36805555555554
C 14116.194444444445
curvity * (x2 - x1) -57.6
center_x 60.624999999999964
center_y 97.00000000000009
start_angle,end_angle 2.8928826644962733 1.038292228493043
```

### 示例5

```
起点: 9 112
终点: 7 112
curvity: -1.6
length 2
R 1.25
c1 8
c2 -0
A 1
B -224
C 12543.4375
curvity * (x2 - x1) 3.2
center_x 8 center_y 112.75
start_angle,end_angle -0.6435011087932844 -2.498091544796509
```

### 示例5

```
起点: 66 2
终点: 113 44
curvity: -0.7
length 63.0317380372777
R 90.04534005325387
c1 110.05319148936171
c2 0.8936170212765957
A 1.7985513807152556
B -82.73336351290178
C -6163.4795849077545
curvity * (x2 - x1) -32.9
center_x 145.7049819855856 center_y -39.89605126958388
start_angle,end_angle 2.6576448111366786 1.9425026038456583
```

### 示例7

```
起点: 103 137
终点: 0 31
curvity: -0.4
length 147.80054127099805
R 369.5013531774951
c1 137.94660194174756
c2 1.029126213592233
A 2.0591007635026863
B -345.9289282684513
C -116540.98501272502
curvity * (x2 - x1) 41.2
center_x -208.14591273501688 center_y 336.2974435066673
start_angle,end_angle -0.5696871613332968 -0.9724030029139584
```
