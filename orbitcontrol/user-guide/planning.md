# 任务计划管理

## 任务 Mission

### 任务列表

点击 `菜单` -> `任务` 会如下显示 `任务列表面板`：

![](/images/orbitcontrol/user-guide/planning-panel-missions.png)

- 可根据任务名称、任务标签、任务类型进行筛选
- 任务卡片中显示简要信息，包括：
  - 任务类型（使用不同图标表示，![](/icons/waypoints.svg) 表示路径任务，![](/icons/diamond.svg) 表示网格任务）
  - 任务名称
  - 预计完成时长
  - 航点数
  - 所属站点

### 新建任务

#### 1. 以手动添加航点的方式新建任务

点击 `任务列表面板` 中的 ![](/icons/plus.svg) 按钮，弹出 `任务新建面板`：

![](/images/orbitcontrol/user-guide/planning-panel-mission-edit.gif)

- 填写任务名称
- 任务标签 ( Tag ) // TODO 补充 Tag 交互页面
- 选择站点 // TODO 原型更新
- 配置航线参数和航点参数

:::tabs
== 航线参数

航线参数是指整个任务期间的公共参数，包括：

1. 巡航速度，任务执行期间设备的运行速度
2. 云台控制
   - 设置为 `使用航点设置` 表示不设公共参数，使用各航点的个性化参数
   - 设置具体的云台角度，表示任务期间始终保持同个角度
3. 结束后动作
   - 返回 `Home`
   - 返回充电点并充电
   - 原地待命

== 航点参数

1. 取航点位置，有两种方式
   - 点击 ![](/icons/plus.svg) 按钮，然后在地图上选择
   - 点击 ![](/icons/map-pin-plus.svg) 按钮，获取设备当前位置（与 `手动控制` 配合使用，可避免手动地图取点造成的误差）
2. 取点后，配置执行动作，在实际任务执行中，动作在到达航点后触发，支持的动作包括：
   | 设备 | 动作 | 说明 |
   | --- | -- | -- |
   | 车辆 | 设置停留时长 | 配置：时长|
   | | 执行充电操作 | |
   | 云台 | 设置云台角度 | 配置：Pitch、Yaw|
   | 相机 | 变焦 | 配置：焦距 |
   | | 开始抓拍 | 配置：间隔、张数 |
   | | 开始录像 | 配置：时长 |

:::

## 调度 Scheduled

## Flows 自动化流程

### trigger 触发条件

告警、通知、传感器数据条件

### Response Mode 响应模式

- 手动，弹出提示，等待人工确认
- 自动

### action

发告警、通知
到指定地点
执行预设 `Mission 任务`
类似 planning 动作，拍照/录像等

支持动作序列

#### 与 Failsafe 的区别：

| 功能机制         | Failsafe（故障保护）         | Flows（自动化流程）          |
| ---------------- | ---------------------------- | ---------------------------- |
| **定位**         | 设备级安全策略               | 流程级事件驱动任务           |
| **配置位置**     | 设备设置菜单中               | Planning → Flows             |
| **触发方式**     | 异常触发（紧急、中断）       | 条件触发（事件/告警）        |
| **执行行为**     | 自动应急响应（如返航、降落） | 执行组合任务（如报警、调度） |
| **是否依赖对方** | 自主，不依赖 Flows           | 可调用，但非必须             |
