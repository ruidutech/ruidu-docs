# 事件上报

## 消息格式

- **协议类型**: MQTT
- **接口地址**: `device/:serial_number/event`
- **请求参数**
  ```json
  {
    "msg_id": "uuid-789",
    "timestamp": 1757403776, // Unix 时间戳
    "serial_number": "sn-191", // 设备序列号
    "data": {
      "id": 2001, // Event ID，参考错误码说明
      "log_levels": "" /* Emergency, Alert, Critical, Error, Warning, 
                          Notice, Info, Debug, Protocol, Disabled */,
      "text": ""
    }
  }
  ```

## 错误码区间规划

| 错误码区间  | 适用模块                      |
| ----------- | ----------------------------- |
| 1001 - 1999 | 设备相关，手动控制/设备状态等 |
| 2001 - 2999 | 云台相关                      |
| 3001 - 3999 | 导航相关                      |
| 4000 - 4999 | 任务相关                      |
| 5000 -      | 预留                          |

## 具体错误码说明

根据需求和开发进度持续维护。

### 通用

| ID   | Text         | Log Level |
| ---- | ------------ | --------- |
| 1001 | 请求参数错误 | Error     |
| 1002 | 模式不匹配   | Error     |

### 设备相关

| ID   | Text                   | Log Level |
| ---- | ---------------------- | --------- |
| 1101 | 推流服务异常           | Error     |
| 1102 | 设备状态不支持当前指令 | Error     |

### 云台相关

| ID   | Text             | Log Level |
| ---- | ---------------- | --------- |
| 2001 | 云台不在线       | Error     |
| 2002 | 云台指令执行失败 | Error     |

### 导航相关

| ID   | Text             | Log Level |
| ---- | ---------------- | --------- |
| 3001 | 导航任务执行失败 | Error     |

### 任务执行相关

| ID   | Text         | Log Level |
| ---- | ------------ | --------- |
| 4001 | 任务执行成功 | Info      |
| 4002 | 任务执行失败 | Error     |

### 系统

| ID   | Text         | Log Level |
| ---- | ------------ | --------- |
| 9001 | 未知内部错误 | Error     |
