# 事件上报

## 消息格式

- **协议类型**: MQTT
- **接口地址**: `device/:serial_number/event`
- **请求参数**
  ```json
  {
    "msg_id": "uuid-789",
    "timestamp": 1757403776, // Unix 时间戳
    "serial_number": "sn-191", // 设备序列号
    "data": {
      "id": 2001, // Event ID，参考错误码说明
      "log_levels": "", // Emergency, Alert, Critical,
                        // Error, Warning, Notice, Info,
                        // Debug, Protocol, Disabled
      "text": ""
    }
  }
  ```

## 错误码区间规划

| 错误码区间  | 适用模块                      |
| ----------- | ----------------------------- |
| 1001 - 1999 | 设备相关，手动控制/设备状态等 |
| 2001 - 2999 | 云台相关                      |
| 3001 - 3999 | 导航相关                      |
| 4000 -      | 预留                          |

## 具体错误码说明

根据需求和开发进度持续维护。

### 通用

| ID   | Text         |
| ---- | ------------ |
| 1001 | 请求参数错误 |
| 1002 | 模式不匹配   |

### 设备相关

| ID   | Text                   |
| ---- | ---------------------- |
| 1101 | 推流服务异常           |
| 1102 | 设备状态不支持当前指令 |

### 云台相关

| ID   | Text             |
| ---- | ---------------- |
| 2001 | 云台不在线       |
| 2002 | 云台指令执行失败 |

### 导航相关

| ID   | Text             |
| ---- | ---------------- |
| 3001 | 导航任务执行失败 |

### 系统

| ID   | Text         |
| ---- | ------------ |
| 9001 | 未知内部错误 |
